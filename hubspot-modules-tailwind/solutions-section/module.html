<section class="py-24 px-8 bg-gray-50" id="solutions">
  <div class="max-w-6xl mx-auto">
    <div class="text-center space-y-16">
      <!-- Header -->
      <div class="space-y-8">
        <div class="space-y-6">
          <h3 class="text-2xl font-medium text-gray-900 inline-block px-2" style="background: linear-gradient(120deg, hsl(25 95% 53% / 0.3) 0%, transparent 100%); background-repeat: no-repeat; background-position: left bottom; background-size: 100% 100%;">
            {{ module.headline }}
          </h3>
          <div class="text-gray-600 text-center max-w-2xl mx-auto leading-relaxed">
            {{ module.subheadline }}
          </div>
        </div>

        <!-- Current Step Status -->
        <div class="current-step-status text-center mb-12">
          <div class="step-status-text text-xl font-medium mb-2 bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent" data-step="0">
            <span class="status-emoji">‚ú®</span>
            <span>Watch our process unfold...</span>
          </div>
          <div class="step-status-text text-xl font-medium mb-2 hidden" style="background: linear-gradient(to right, #3b82f6, #06b6d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" data-step="1">
            <span class="status-emoji">üîç</span>
            <span>Capturing every data point across your GTM</span>
          </div>
          <div class="step-status-text text-xl font-medium mb-2 hidden" style="background: linear-gradient(to right, #22c55e, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" data-step="2">
            <span class="status-emoji">üß†</span>
            <span>AI analyzing patterns and identifying opportunities</span>
          </div>
          <div class="step-status-text text-xl font-medium mb-2 hidden" style="background: linear-gradient(to right, #f97316, #ef4444); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" data-step="3">
            <span class="status-emoji">üéØ</span>
            <span>Optimizing and steering your revenue engine</span>
          </div>
          <div class="h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent mx-auto w-[200px] transition-all duration-600"></div>
        </div>

        <!-- Process Timeline -->
        <div class="process-timeline relative min-h-[600px] flex justify-between items-start max-w-5xl mx-auto px-8">
          <!-- Timeline Base -->
          <div class="timeline-base absolute top-16 left-0 right-0 h-1 bg-gray-300 rounded-full z-0 hidden lg:block"></div>
          <div class="timeline-progress absolute top-16 left-0 h-1 bg-primary rounded-full z-10 w-0 transition-all duration-800 hidden lg:block"></div>

          <!-- Step 1 -->
          <div class="process-step flex flex-col items-center relative z-20 w-72 opacity-40 transition-all duration-600" data-step="1">
            <div class="step-node relative mb-8">
              <div class="step-pulse absolute inset-0 rounded-full bg-primary/40 opacity-0"></div>
              <div class="step-circle w-24 h-24 rounded-full bg-gray-100 border-4 border-gray-300 flex items-center justify-center relative transition-all duration-400 z-10">
                <div class="step-number absolute -top-2 -right-2 w-8 h-8 rounded-full bg-primary text-white font-bold text-sm flex items-center justify-center z-20">01</div>
                <svg class="w-10 h-10 text-gray-400 transition-all duration-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </div>
            </div>
            <div class="step-card bg-white border border-gray-200 rounded-xl p-6 text-center flex flex-col gap-4 w-full max-w-72 transition-all duration-400">
              <h4 class="text-lg font-semibold text-gray-600 transition-all duration-300">See It All</h4>
              <p class="text-sm leading-relaxed text-gray-600 opacity-60 transition-all duration-300">Gain 100% visibility across your go-to-market efforts. Every lead dispositioned. Every action tracked.</p>
              <div class="text-xs font-medium text-primary opacity-40 transition-all duration-300">Complete data capture across all touchpoints</div>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="process-step flex flex-col items-center relative z-20 w-72 opacity-40 transition-all duration-600" data-step="2">
            <div class="step-node relative mb-8">
              <div class="step-pulse absolute inset-0 rounded-full bg-primary/40 opacity-0"></div>
              <div class="step-circle w-24 h-24 rounded-full bg-gray-100 border-4 border-gray-300 flex items-center justify-center relative transition-all duration-400 z-10">
                <div class="step-number absolute -top-2 -right-2 w-8 h-8 rounded-full bg-primary text-white font-bold text-sm flex items-center justify-center z-20">02</div>
                <svg class="w-10 h-10 text-gray-400 transition-all duration-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                  <polyline points="17 6 23 6 23 12"></polyline>
                </svg>
              </div>
            </div>
            <div class="step-card bg-white border border-gray-200 rounded-xl p-6 text-center flex flex-col gap-4 w-full max-w-72 transition-all duration-400">
              <h4 class="text-lg font-semibold text-gray-600 transition-all duration-300">Spot the Patterns</h4>
              <p class="text-sm leading-relaxed text-gray-600 opacity-60 transition-all duration-300">Uncover the plays, behaviors, and disciplines that consistently convert or block progress.</p>
              <div class="text-xs font-medium text-primary opacity-40 transition-all duration-300">AI-powered pattern recognition and insights</div>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="process-step flex flex-col items-center relative z-20 w-72 opacity-40 transition-all duration-600" data-step="3">
            <div class="step-node relative mb-8">
              <div class="step-pulse absolute inset-0 rounded-full bg-primary/40 opacity-0"></div>
              <div class="step-circle w-24 h-24 rounded-full bg-gray-100 border-4 border-gray-300 flex items-center justify-center relative transition-all duration-400 z-10">
                <div class="step-number absolute -top-2 -right-2 w-8 h-8 rounded-full bg-primary text-white font-bold text-sm flex items-center justify-center z-20">03</div>
                <svg class="w-10 h-10 text-gray-400 transition-all duration-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>
                </svg>
              </div>
            </div>
            <div class="step-card bg-white border border-gray-200 rounded-xl p-6 text-center flex flex-col gap-4 w-full max-w-72 transition-all duration-400">
              <h4 class="text-lg font-semibold text-gray-600 transition-all duration-300">Steer the GTM</h4>
              <p class="text-sm leading-relaxed text-gray-600 opacity-60 transition-all duration-300">Direct people, processes, and investment where they matter most so pipeline turns into predictable revenue.</p>
              <div class="text-xs font-medium text-primary opacity-40 transition-all duration-300">Data-driven optimization and resource allocation</div>
            </div>
          </div>
        </div>

        <!-- CTA -->
        <div class="mt-16 text-center">
          <a href="{{ module.cta_url }}" class="inline-flex items-center gap-3 px-8 py-4 bg-primary text-white font-medium rounded-lg hover-elevate transition-all duration-300 shadow-lg hover:shadow-xl group">
            <span>{{ module.cta_text }}</span>
            <span class="inline-block animate-arrow-move">‚Üí</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
(function() {
  let currentStep = 0;
  let hasCompletedCycle = false;
  const steps = [1, 2, 3];
  const delays = [2500, 2500, 2500];

  function updateStep(step) {
    // Update status text
    const statusTexts = document.querySelectorAll('.step-status-text');
    statusTexts.forEach(text => text.classList.add('hidden'));
    const currentText = document.querySelector(`.step-status-text[data-step="${step}"]`);
    if (currentText) {
      currentText.classList.remove('hidden');
      currentText.style.opacity = '0';
      setTimeout(() => { currentText.style.opacity = '1'; }, 50);
    }

    // Update timeline progress
    const progress = document.querySelector('.timeline-progress');
    const progressPercent = step === 0 ? 0 : (step / 3) * 100;
    if (progress) {
      progress.style.width = progressPercent + '%';
    }

    // Update step states
    const processSteps = document.querySelectorAll('.process-step');
    processSteps.forEach((stepEl, index) => {
      const stepNum = index + 1;
      const circle = stepEl.querySelector('.step-circle');
      const icon = stepEl.querySelector('.step-circle svg');
      const pulse = stepEl.querySelector('.step-pulse');
      const card = stepEl.querySelector('.step-card');
      const title = stepEl.querySelector('h4');
      const desc = stepEl.querySelector('p');
      const detail = stepEl.querySelector('.text-xs');

      if (stepNum === step) {
        // Active
        stepEl.style.opacity = '1';
        stepEl.style.transform = 'scale(1.05)';
        circle.classList.add('bg-primary', 'border-white');
        circle.classList.remove('bg-gray-100', 'border-gray-300');
        circle.style.boxShadow = '0 0 40px hsl(25 95% 53% / 0.5)';
        icon.classList.add('text-white');
        icon.classList.remove('text-gray-400');
        pulse.style.animation = 'pulseRing 2s ease-in-out infinite';
        card.classList.add('border-primary', 'bg-primary/5');
        card.classList.remove('border-gray-200');
        card.style.boxShadow = '0 20px 50px rgba(0, 0, 0, 0.15)';
        title.classList.add('text-gray-900');
        title.classList.remove('text-gray-600');
        desc.style.opacity = '1';
        detail.style.opacity = '1';
      } else if (stepNum < step) {
        // Completed
        stepEl.style.opacity = '0.7';
        stepEl.style.transform = 'scale(1)';
        circle.classList.add('bg-primary', 'border-primary');
        circle.classList.remove('bg-gray-100', 'border-gray-300', 'border-white');
        circle.style.boxShadow = '';
        icon.classList.add('text-white');
        icon.classList.remove('text-gray-400');
        pulse.style.animation = '';
        card.classList.remove('border-primary', 'bg-primary/5');
        card.classList.add('border-gray-200');
        card.style.boxShadow = '';
        title.classList.remove('text-gray-900');
        title.classList.add('text-gray-600');
        desc.style.opacity = '0.6';
        detail.style.opacity = '0.4';
      } else {
        // Pending
        stepEl.style.opacity = '0.4';
        stepEl.style.transform = 'scale(0.9)';
        circle.classList.remove('bg-primary', 'border-white', 'border-primary');
        circle.classList.add('bg-gray-100', 'border-gray-300');
        circle.style.boxShadow = '';
        icon.classList.remove('text-white');
        icon.classList.add('text-gray-400');
        pulse.style.animation = '';
        card.classList.remove('border-primary', 'bg-primary/5');
        card.classList.add('border-gray-200');
        card.style.boxShadow = '';
        title.classList.remove('text-gray-900');
        title.classList.add('text-gray-600');
        desc.style.opacity = '0.6';
        detail.style.opacity = '0.4';
      }
    });
  }

  function cycleSteps() {
    updateStep(currentStep);

    setTimeout(() => {
      if (currentStep === 3) {
        currentStep = 0;
        hasCompletedCycle = true;
      } else {
        currentStep++;
      }
      cycleSteps();
    }, currentStep === 0 ? 1500 : delays[currentStep - 1]);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(cycleSteps, 1000);
    });
  } else {
    setTimeout(cycleSteps, 1000);
  }
})();
</script>
