<section class="solutions-section" id="solutions">
  <div class="solutions-container">
    <div class="solutions-content">
      <!-- Header -->
      <div class="solutions-header">
        <h3 class="solutions-headline">{{ module.headline }}</h3>
        <div class="solutions-subheadline">{{ module.subheadline }}</div>
      </div>

      <!-- Current Step Status -->
      <div class="current-step-status">
        <div class="step-status-text" data-step="0">
          <span class="status-emoji">‚ú®</span>
          <span>Watch our process unfold...</span>
        </div>
        <div class="step-status-text" data-step="1" style="display: none;">
          <span class="status-emoji">üîç</span>
          <span>Capturing every data point across your GTM</span>
        </div>
        <div class="step-status-text" data-step="2" style="display: none;">
          <span class="status-emoji">üß†</span>
          <span>AI analyzing patterns and identifying opportunities</span>
        </div>
        <div class="step-status-text" data-step="3" style="display: none;">
          <span class="status-emoji">üéØ</span>
          <span>Optimizing and steering your revenue engine</span>
        </div>
        <div class="status-underline"></div>
      </div>

      <!-- Process Timeline -->
      <div class="process-timeline">
        <!-- Timeline Base -->
        <div class="timeline-base"></div>
        <div class="timeline-progress"></div>

        <!-- Step 1 -->
        <div class="process-step" data-step="1">
          <div class="step-node">
            <div class="step-pulse"></div>
            <div class="step-circle">
              <div class="step-number">01</div>
              <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </div>
          </div>
          <div class="step-card">
            <h4 class="step-title">See It All</h4>
            <p class="step-description">Gain 100% visibility across your go-to-market efforts. Every lead dispositioned. Every action tracked.</p>
            <div class="step-detail">Complete data capture across all touchpoints</div>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="process-step" data-step="2">
          <div class="step-node">
            <div class="step-pulse"></div>
            <div class="step-circle">
              <div class="step-number">02</div>
              <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
              </svg>
            </div>
          </div>
          <div class="step-card">
            <h4 class="step-title">Spot the Patterns</h4>
            <p class="step-description">Uncover the plays, behaviors, and disciplines that consistently convert or block progress.</p>
            <div class="step-detail">AI-powered pattern recognition and insights</div>
          </div>
        </div>

        <!-- Step 3 -->
        <div class="process-step" data-step="3">
          <div class="step-node">
            <div class="step-pulse"></div>
            <div class="step-circle">
              <div class="step-number">03</div>
              <svg class="step-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>
              </svg>
            </div>
          </div>
          <div class="step-card">
            <h4 class="step-title">Steer the GTM</h4>
            <p class="step-description">Direct people, processes, and investment where they matter most so pipeline turns into predictable revenue.</p>
            <div class="step-detail">Data-driven optimization and resource allocation</div>
          </div>
        </div>
      </div>

      <!-- CTA -->
      <div class="solutions-cta">
        <a href="{{ module.cta_url }}" class="cta-button">
          <span>{{ module.cta_text }}</span>
          <span class="cta-arrow">‚Üí</span>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
(function() {
  let currentStep = 0;
  let hasCompletedCycle = false;
  const steps = [1, 2, 3];
  const delays = [2500, 2500, 2500];

  function updateStep(step) {
    // Update status text
    const statusTexts = document.querySelectorAll('.step-status-text');
    statusTexts.forEach(text => text.style.display = 'none');
    const currentText = document.querySelector(`.step-status-text[data-step="${step}"]`);
    if (currentText) {
      currentText.style.display = 'block';
      currentText.style.opacity = '0';
      setTimeout(() => { currentText.style.opacity = '1'; }, 50);
    }

    // Update timeline progress
    const progress = document.querySelector('.timeline-progress');
    const progressPercent = step === 0 ? 0 : (step / 3) * 100;
    if (progress) {
      progress.style.width = progressPercent + '%';
    }

    // Update step states
    const processSteps = document.querySelectorAll('.process-step');
    processSteps.forEach((stepEl, index) => {
      const stepNum = index + 1;
      if (stepNum === step) {
        stepEl.classList.add('active');
        stepEl.classList.remove('completed');
      } else if (stepNum < step) {
        stepEl.classList.add('completed');
        stepEl.classList.remove('active');
      } else {
        stepEl.classList.remove('active', 'completed');
      }
    });
  }

  function cycleSteps() {
    updateStep(currentStep);

    setTimeout(() => {
      if (currentStep === 3) {
        currentStep = 0;
        hasCompletedCycle = true;
      } else {
        currentStep++;
      }
      cycleSteps();
    }, currentStep === 0 ? 1500 : delays[currentStep - 1]);
  }

  // Start cycling
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(cycleSteps, 1000);
    });
  } else {
    setTimeout(cycleSteps, 1000);
  }
})();
</script>
